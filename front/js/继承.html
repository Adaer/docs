<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>继承 | adaer的文档</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/docs/favicon.ico">
    <meta name="description" content="vue doc vuepress blog adaer">
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
    <meta name="keywords" content="vue,vuepress,adaer">
    <link rel="preload" href="/docs/assets/css/0.styles.a6acb038.css" as="style"><link rel="preload" href="/docs/assets/js/app.74c6cec0.js" as="script"><link rel="preload" href="/docs/assets/js/2.55133204.js" as="script"><link rel="preload" href="/docs/assets/js/18.c520bfa9.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.a9893fff.js"><link rel="prefetch" href="/docs/assets/js/11.1ac0fe71.js"><link rel="prefetch" href="/docs/assets/js/12.c8a3a42a.js"><link rel="prefetch" href="/docs/assets/js/13.fe2191ee.js"><link rel="prefetch" href="/docs/assets/js/14.f76da9cd.js"><link rel="prefetch" href="/docs/assets/js/15.dd7ed017.js"><link rel="prefetch" href="/docs/assets/js/16.7c7aae77.js"><link rel="prefetch" href="/docs/assets/js/17.474e724d.js"><link rel="prefetch" href="/docs/assets/js/19.55ab8d0e.js"><link rel="prefetch" href="/docs/assets/js/20.5711153a.js"><link rel="prefetch" href="/docs/assets/js/21.231f4ae1.js"><link rel="prefetch" href="/docs/assets/js/22.7cc2684a.js"><link rel="prefetch" href="/docs/assets/js/23.3b063b48.js"><link rel="prefetch" href="/docs/assets/js/24.43f5f867.js"><link rel="prefetch" href="/docs/assets/js/3.0c0e9e57.js"><link rel="prefetch" href="/docs/assets/js/4.8598e7ef.js"><link rel="prefetch" href="/docs/assets/js/5.a4fe16f1.js"><link rel="prefetch" href="/docs/assets/js/6.acd2f31e.js"><link rel="prefetch" href="/docs/assets/js/7.4ad3b3ba.js"><link rel="prefetch" href="/docs/assets/js/8.1de64de7.js"><link rel="prefetch" href="/docs/assets/js/9.98b84756.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.a6acb038.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/avatar.jpg" alt="adaer的文档" class="logo"> <span class="site-name can-hide">adaer的文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/docs/front/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="https://adaer.github.io/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/docs/front/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="https://adaer.github.io/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/docs/front/js/" class="sidebar-heading clickable router-link-active open"><span>JS</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/front/js/jsDemo.html" class="sidebar-link">jsDemo</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/front/js/JS-继承.html" class="sidebar-link">call apply bind new 的实现</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/front/js/栈和队列.html" class="sidebar-link">栈和队列</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/front/js/面向对象OO.html" class="sidebar-link">面向对象OO</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/front/js/继承.html" class="active sidebar-link">继承</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/docs/front/css/" class="sidebar-heading clickable"><span>CSS</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/front/css/flex.html" class="sidebar-link">flex解答</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/front/css/CSS格式化上下文.html" class="sidebar-link">CSS中的格式化上下文</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><a href="/docs/front/es6/" class="sidebar-link">ES6</a><ul class="sidebar-sub-headers"></ul></li><li><section class="sidebar-group depth-0"><a href="/docs/front/vue/" class="sidebar-heading clickable"><span>Vue</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/front/vue/响应式数据原理.html" class="sidebar-link">vue响应式数据原理</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><a href="/docs/front/mithril/" class="sidebar-link">Mithril</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/front/webpack/" class="sidebar-link">webpack</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/front/toolkit/" class="sidebar-link">toolkit</a><ul class="sidebar-sub-headers"></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h3> <p>继承方式：接口继承、实现继承
接口继承制继承方法签名， 实现继承则继承实际方法；JS函数没有签名，无法实现接口继承，只支持实现继承，主要依靠原型链实现！</p> <h4 id="一、原型链继承"><a href="#一、原型链继承" class="header-anchor">#</a> 一、原型链继承</h4> <hr> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>所有引用类型默认都通过原型链继承了Object</li> <li>给子类添加原型方法时，一定要放在替换子类原型对象之后</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
<span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSuperVal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subProp <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
<span class="token comment">//继承</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//添加子类原型方法</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSubVal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subProp
<span class="token punctuation">}</span>
<span class="token comment">//重写父类/超类中的方法</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSuperVal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'false'</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
instance<span class="token punctuation">.</span><span class="token function">getSuperVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'false'</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">缺点：</p> <ol><li>所有父类/超类中的引用类型都被实例共享</li> <li>创建子类实例时，不能向父类/超类的构造函数传递参数（没有办法在不影响所有实例对象的情况下，给父类/超类构造函数传参）</li></ol></div> <h4 id="二、借用构造函数"><a href="#二、借用构造函数" class="header-anchor">#</a> 二、借用构造函数</h4> <hr> <p>子类在构造函数内部调用父类/超类构造函数，通过<strong>call apply</strong>方法在将来新创建的对象上执行构造函数，<strong>解决了原型中引用类型的问题</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'Ali'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getColors</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> instance1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
instance1<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'#90f'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance1<span class="token punctuation">.</span>age<span class="token punctuation">,</span> instance1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> instance1<span class="token punctuation">.</span><span class="token function">getColors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//20 &quot;Ali&quot; (3) [&quot;red&quot;, &quot;blue&quot;, &quot;#90f&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span>age<span class="token punctuation">,</span> instance2<span class="token punctuation">.</span>name<span class="token punctuation">,</span> instance2<span class="token punctuation">.</span>colors<span class="token punctuation">)</span>
<span class="token comment">//20 &quot;Ali&quot; (2) [&quot;red&quot;, &quot;blue&quot;]</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">缺点：</p> <ol><li>方法都在构造函数中定义，函数无法复用</li> <li>在父类/超类中定义的方法的，对子类不可见</li></ol></div> <h4 id="三、组合继承"><a href="#三、组合继承" class="header-anchor">#</a> 三、组合继承</h4> <hr> <p>经典继承，由原型链继承+借用构造函数，最常用继承模式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
<span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getColors</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//继承属性</span>
    <span class="token comment">//第二次调用Super，此时子类再次获得父类的属性、方法，同时屏蔽父类同名属性、方法</span>
    <span class="token function">Super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token comment">//继承方法</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//第一次调用Super，此时子类获得父类的属性、方法</span>
<span class="token comment">//修正constructor的指向</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Sub
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age
<span class="token punctuation">}</span>

<span class="token keyword">let</span> instance1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token string">'Ali'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
instance1<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'#90f'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token string">'KK'</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance1<span class="token punctuation">.</span>age<span class="token punctuation">,</span> instance1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> instance1<span class="token punctuation">.</span><span class="token function">getColors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>instance1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//28 &quot;Ali&quot; (3) [&quot;red&quot;, &quot;blue&quot;, &quot;#90f&quot;] &quot;Ali&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span>age<span class="token punctuation">,</span> instance2<span class="token punctuation">.</span>name<span class="token punctuation">,</span> instance2<span class="token punctuation">.</span>colors<span class="token punctuation">,</span>
instance2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> instance2<span class="token punctuation">.</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//81 &quot;KK&quot; (2) [&quot;red&quot;, &quot;blue&quot;] &quot;KK&quot; 81</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">缺点</p> <p>调用2次父类/超类的构造函数，第一次在创建子类的原型对象时；第二次在子类构造函数内部call apply时</p></div> <h4 id="四、原型式继承"><a href="#四、原型式继承" class="header-anchor">#</a> 四、原型式继承</h4> <hr> <p>用一个对象来作为另一个对象的基础，传递给createObj函数，根据createObj返回的对象加以修改</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createObj</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//创建一个临时性构造函数</span>
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">//将传入的对象o作为此构造函数的原型对象</span>
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o
    <span class="token comment">//返回临时性构造函数的新实例</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Ali'</span><span class="token punctuation">,</span>
    colors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token function">createObj</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'KK'</span>
p1<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'#99f'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token function">createObj</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
p2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'JJ'</span>
p2<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'#89a'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span>
</code></pre></div><p>ES5改进，<strong>Object.create()</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Ali'</span><span class="token punctuation">,</span>
    colors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'KK'</span>
p1<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'#99f'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> p2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token string">'JJ'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p2<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'#89a'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>name<span class="token punctuation">,</span>p1<span class="token punctuation">.</span>colors<span class="token punctuation">,</span> p2<span class="token punctuation">.</span>name<span class="token punctuation">,</span>p2<span class="token punctuation">.</span>colors<span class="token punctuation">)</span>
<span class="token comment">// KK [&quot;red&quot;, &quot;blue&quot;, &quot;#99f&quot;, &quot;#89a&quot;] JJ  [&quot;red&quot;, &quot;blue&quot;, &quot;#99f&quot;, &quot;#89a&quot;]</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">提示</p> <ul><li>Object.create支持IE9+</li> <li>缺点：所有对象中的引用类型都被所有实例共享</li></ul></div> <h4 id="五、寄生式继承"><a href="#五、寄生式继承" class="header-anchor">#</a> 五、寄生式继承</h4> <hr> <p>思路：与寄生(parasitic)构造函数模式+工厂模式（多了一个函数来返回新对象）类似;</p> <ul><li>主要考虑对象而不是自定义类型和构造函数的情况下</li> <li>createObj不是必需，任何能返回新对象的函数都可以适用此模式</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createObj</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">parasiticObj</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//返回一个新对象</span>
    <span class="token keyword">let</span> clone <span class="token operator">=</span> <span class="token function">createObj</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
    <span class="token comment">//添加方法</span>
    clone<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> clone<span class="token punctuation">.</span>name
    <span class="token punctuation">}</span>
    <span class="token comment">//返回此对象</span>
    <span class="token keyword">return</span> clone
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Ali'</span><span class="token punctuation">,</span>
    colors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'KK'</span><span class="token punctuation">,</span>
    colors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token function">parasiticObj</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token function">parasiticObj</span><span class="token punctuation">(</span>person2<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p2<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//Ali KK</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">缺点</p> <p>使用寄生式继承给对象添加方法，不能做到函数的复用，降低效率，与构造函数模式类似（构造函数模式属性、方法挂载在this上，而寄生式继承将属性、方法挂载在clone对象上）</p></div> <h4 id="六、寄生组合式继承"><a href="#六、寄生组合式继承" class="header-anchor">#</a> 六、寄生组合式继承</h4> <hr> <p><strong>通过借用构造函数来继承属性，通过原型链的混成形式来继承方法</strong>，不必为了指定子类的原型而去调用父类的构造函数，只需要复制父类的原型对象的一个副本</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createObj</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">inhreritPrototype</span><span class="token punctuation">(</span><span class="token parameter">SubType<span class="token punctuation">,</span> SuperType</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//复制父类的原型对象副本</span>
    <span class="token keyword">let</span> prototype <span class="token operator">=</span> <span class="token function">createObj</span><span class="token punctuation">(</span><span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> 
    <span class="token comment">//指正副本的构造函数指向</span>
    prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType
    <span class="token comment">//将创建的对象副本赋值给子类的原型对象</span>
    <span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> prototype
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//调用一次父类构造函数</span>
    <span class="token function">Super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token function">inhreritPrototype</span><span class="token punctuation">(</span>Sub<span class="token punctuation">,</span> Super<span class="token punctuation">)</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token string">'Ali'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/front/js/面向对象OO.html" class="prev">
        面向对象OO
      </a></span> <span class="next"><a href="/docs/front/css/flex.html">
        flex解答
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2dcanvas" width="135" height="300" class="live2dcanvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/docs/assets/js/app.74c6cec0.js" defer></script><script src="/docs/assets/js/2.55133204.js" defer></script><script src="/docs/assets/js/18.c520bfa9.js" defer></script>
  </body>
</html>
